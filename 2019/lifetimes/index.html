<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="è°·ç²’">
  <meta name="description" content="æ•°æ®æŒ–æ˜/æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆ">
  <meta name="keywords" content="åä¸­ç§‘æŠ€å¤§å­¦,è°·ç²’,è°·ç²’ç²’,æœºå™¨å­¦ä¹ ,ç¤¾äº¤ç½‘ç»œï¼Œæ•°æ®æŒ–æ˜,ç½‘æ˜“æ¸¸æˆ,ç±³å“ˆæ¸¸,æ¸¸æˆè®¾è®¡,å¹¿å‘ŠæŠ•æ”¾,ç”¨æˆ·åˆ†æ,å¢é•¿é»‘å®¢,å¼€å‘è€…,æå®¢,ä»£ç ,å¼€æº,Developer,Programmer,Coder,Geek,DataScientist">
  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-76017508-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
  <link rel="prev" href="https://kuhungio.me/2019/machine_learning_system_design/" />
  <link rel="next" href="https://kuhungio.me/2020/audio_progress/" />
  <link rel="canonical" href="https://kuhungio.me/2019/lifetimes/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           å¦‚ä½•è®¡ç®—ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼ˆCLVï¼‰ | è°·ç²’çš„åšå®¢
       
  </title>
  <meta name="title" content="å¦‚ä½•è®¡ç®—ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼ˆCLVï¼‰ | è°·ç²’çš„åšå®¢">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/kuhungio.me"
    },
    "articleSection" : "posts",
    "name" : "å¦‚ä½•è®¡ç®—ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼ˆCLVï¼‰",
    "headline" : "å¦‚ä½•è®¡ç®—ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼ˆCLVï¼‰",
    "description" : "åœ¨ç”¨æˆ·å…³ç³»ç®¡ç†ä¸­ï¼Œå¸¸ä¼šé‡åˆ°äº›ç›´å‡»çµé­‚çš„é—®é¢˜ï¼š\nè¿™æ‰¹ç”¨æˆ·åˆ°åº•ä»·å€¼å‡ ä½•ï¼Ÿ\nä¸ºä»€ä¹ˆè¦ç”¨è¿™ç§æªæ–½å»å¹²é¢„ç”¨æˆ·ï¼Œè€Œä¸æ˜¯å¦ä¸€ç§æ–¹å¼ã€‚\nä¸ºä»€ä¹ˆå¹²é¢„è¿™ç±»ç”¨æˆ·ï¼Œè€Œä¸å»å¹²é¢„å¦ä¸€ç±»ï¼Œä»–ä»¬çš„åˆ’åˆ†æ ‡å‡†æ˜¯ä»€ä¹ˆã€‚\næœ‰è¿™äº›é—®é¢˜ï¼Œå®è´¨æ˜¯å› ä¸ºå¯¹å®¢æˆ·ä»·å€¼ä¸å¤Ÿäº†è§£ï¼Œç¼ºä¹è¡Œä¹‹æœ‰æ•ˆçš„åˆ’åˆ†æ–¹å¼ã€‚\nç”¨æˆ·ç²¾ç»†åŒ–è¿è¥ä»·å€¼å·¨å¤§ éšç€äººå£çº¢åˆ©çš„æ¶ˆå¤±ï¼Œå¢é•¿é€æ¸è§é¡¶ï¼Œæ€¥éœ€åœ¨ç°æœ‰ç”¨æˆ·æ± åšå­¦é—®ã€‚è¿‡å»ç²—æ”¾å¼çš„ä¹°é‡ç­–ç•¥å·²ç»ä¸å†ç”Ÿæ•ˆï¼Œä¸€æ˜¯ä¹°é‡æˆæœ¬é€æ¸é«˜ä¼ï¼ŒäºŒæ˜¯ä¹°é‡å¸¦æ¥çš„ç”¨æˆ·å¿ è¯šåº¦æä½ã€‚å¯¹ç°æœ‰å®¢æˆ·ç¾¤ä½“çš„åˆ’åˆ†å’Œäº’ç›¸å€’æµï¼Œæˆä¸ºé‡ä¸­ä¹‹é‡ã€‚è¡Œä¸šä¸­çš„é»‘è¯â€œæ´—ç”¨æˆ·â€ï¼Œå³æ˜¯è®²çš„è¿™ä¸€ç­–ç•¥ã€‚\nå¯¹äºå¦‚ä½•åˆ’åˆ†ç”¨æˆ·ï¼Œä¸ç”¨çš„èŒèƒ½ä¼šæœ‰ä¸åŒçš„çœ‹æ³•ã€‚äº§å“æœ‰äº§å“çš„çœ‹æ³•ï¼Œå¯èƒ½åŸºäºæŸé¡¹åŠŸèƒ½åå¥½ï¼›è¿è¥æœ‰è¿è¥çš„çœ‹æ³•ï¼Œæ˜¯å„ç§æ´»åŠ¨ç©æ³•çš„å®šä¹‰ï¼›ç”šè‡³é¢†å¯¼è¿˜æœ‰ä»–çš„ä¸€å¥—çœ‹æ³•ã€‚ä½†æ˜¯ï¼Œæ— è®ºæ€ä¹ˆåˆ‡å…¥ï¼Œå•†ä¸šçš„æ ¸å¿ƒæ‹¿æä½ï¼Œæ‰ä¼šå…«ä¹ä¸ç¦»åã€‚\nä»€ä¹ˆæ˜¯å•†ä¸šçš„æœ¬è´¨ï¼šå•†ä¸šçš„æœ¬è´¨æ˜¯è·åˆ©ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä»ç”¨æˆ·çš„è´§å¸ä»·å€¼åˆ‡å…¥ï¼Œè¯„ä¼°å’Œåˆ’åˆ†ç”¨æˆ·çš„ç”Ÿå‘½å‘¨æœŸã€‚\nç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼Œè¿™å¹¶ä¸æ˜¯å­¦ç•Œçš„æ–°é²œäº§ç‰©ï¼Œè¯¥ç†è®ºåœ¨ä¸Šä¸–çºª80å¹´ä»£å°±å·²ç»æå‡ºã€‚ä½†å¯¹äºäº’è”ç½‘ï¼Œç½‘ä¸Šå¯æœå¯»åˆ°çš„èµ„æ–™å°‘ä¹‹åˆå°‘ã€‚å¯èƒ½çš„åŸå› æœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯äº’è”ç½‘åœ¨è¿‡å»20å¹´å¿«é€Ÿçˆ†å‘ï¼Œé£å£ä¸Šèººç€ä¹Ÿèƒ½èµšé’±ï¼›äºŒæ˜¯å„å®¶çš„ç­–ç•¥å†…éƒ¨ä¸ç»Ÿä¸€ï¼Œæ— æ³•å½¢æˆç»Ÿä¸€çš„å£å¾„ã€‚\nä½†è¿™äº›éƒ½ä¸æ˜¯ä¸å»åº”ç”¨ä»–çš„ç†ç”±ï¼Œåè€Œè¯´æ˜å…¶ä¸­ä»·å€¼å·¨å¤§ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å‰¥ç¦»å¼€å¤æ‚çš„å•†ä¸šé€»è¾‘ï¼Œä»…ä»äº¤æ˜“å…¥æ‰‹ï¼Œåˆ†æç”¨æˆ·çš„ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼Œä»¥åŠç”¨æˆ·æ‰€å¤„çš„çŠ¶æ€ã€‚\nç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼ˆCLVï¼‰ éšç€ç²¾ç»†åŒ–è¿è¥çš„é“ºå¼€ï¼Œè¿‡å»ç²—æ”¾å¼çš„ã€ä¹°é‡ç”¨æˆ·å·²ç»ä¸å†ä¹°è´¦ã€‚æ¯ä¸ªç”¨æˆ·æ‰€èƒ½æ¥å—çš„æœ€ä½æœåŠ¡å„ä¸ç›¸åŒã€‚å¦‚ä½•æ ¹æ®ç”¨æˆ·ä»·å€¼ï¼Œè¿›è¡Œèµ„æºçš„æœ‰æ•ˆåˆ©ç”¨ã€‚æœ€å¤§åŒ–æ æ†çš„ä½¿ç”¨ï¼Œæˆä¸ºä¼ä¸šç”Ÿæ­»çš„å…³é”®ã€‚\nè¿‡å»ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„ç†è®ºå‡ºç°åœ¨äº’è”ç½‘åº”ç”¨æˆ–æ˜¯æ¸¸æˆä¸­ã€‚ä½†æ˜¯ï¼Œè¿ç”¨è·¨å­¦ç§‘çš„æ€ç»´ï¼Œå°±å¯ä»¥å‘ç°ï¼šå¸‚åœºè¥é”€é¢†åŸŸå·²è¿›è¡Œè¿‡ç ”ç©¶ï¼Œå¹¶ç»™å‡ºäº†ç²¾åº¦æé«˜ã€å¯è§£é‡Šæ€§å¼ºçš„æ¨¡å‹æ–¹æ³•ã€‚\nè¿™ç§æ–¹æ³•ï¼Œå°±å«åšç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼Œè‹±æ–‡åç§° Customer Life Time Valueï¼Œç®€ç§° CLV æˆ–è€… LTVã€‚\nCLV æ˜¯ä»€ä¹ˆ ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸï¼Œæ˜¯ä¸€ç§åˆ»ç”»ç”¨æˆ·çš„æ–¹æ³•ã€‚ä¸€èˆ¬ç”¨æ¥è§£å†³ä¸¤ç±»é—®é¢˜ï¼š\nç”¨æˆ·è¿˜æœ‰å¤šå°‘ä»·å€¼ã€ç”¨ä»¥è¡¡é‡æŠ•å…¥äº§å‡ºæ¯” åœ¨å¹²é¢„ç”¨æˆ·åï¼Œæ ¹æ®ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼çš„å˜åŒ–ï¼Œä¼˜åŒ–èµ„æºçš„æŠ•æ”¾ã€‚ å³ç”¨æˆ·ç®¡ç†çš„ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šç”¨æˆ·æ‰€å…·å¤‡çš„ä»·å€¼ä»¥åŠç­–ç•¥çš„æœ‰æ•ˆæ€§ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCLV çš„äº§å“å½¢æ€è¦æ±‚éåˆçº¦ã€‚åˆçº¦åœ¨å›½å†…æœ€æœ‰ä»£è¡¨çš„æ˜¯åˆçº¦æ‰‹æœºã€‚ä¸€èˆ¬äº’è”ç½‘äº§å“ï¼Œåˆçº¦å½¢æ€è¾ƒä¸ºå°‘è§ã€‚\nCLV çš„ç”¨æˆ·ç¾¤ä½“éœ€å·²ç»äº§ç”Ÿäº¤æ˜“ï¼Œæœªä»˜è´¹ç”¨æˆ·ä¸çº³å…¥è€ƒé‡ã€‚å½“ç„¶ï¼Œæ¦‚å¿µè¿ç§»ï¼Œå°†ä»˜è´¹æ¢æˆæ´»è·ƒæˆ–å†…å®¹æ¶ˆè´¹ï¼Œè¯¥æ¨¡å‹ä¹Ÿèƒ½å¤„ç†ã€‚\nCLV å›ç­”å“ªäº›é—®é¢˜ ç”¨æˆ·æ´»è·ƒè¿˜æ˜¯æµå¤±ï¼Œç”¨æˆ·è¿˜æœ‰å¤šå°‘ä»˜è´¹æ½œåŠ›ï¼Œç”¨æˆ·åœ¨æœªæ¥æŸæ®µæ—¶é—´ä¼šå¦å†æ¬¡è´­ä¹°ã€‚è¿™ä¸‰ä¸ªé—®é¢˜ï¼Œæ˜¯ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼èƒ½å¤Ÿå›ç­”çš„ã€‚\nå¦‚ä½•åœ¨è‡ªå®¶äº§å“ä¸­å¼•å…¥ CLV åº”ç”¨åœºæ™¯ åˆ¤æ–­ç”¨æˆ·æ‰€å¤„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ é¢„æµ‹ç”¨æˆ·æŒ‡å®šå‘¨æœŸå†…è´­ä¹°æ¦‚ç‡ é¢„æµ‹ç”¨æˆ·çš„ç”Ÿå‘½å‘¨æœŸä»·å€¼ é€šè¿‡å†å²ä»˜è´¹æ•°æ®ï¼Œé¢„æµ‹æœªæ¥ä»˜è´¹ æ´»è·ƒä¸æµå¤±çš„å®šä¹‰ å®šä¹‰ï¼š\nç”¨æˆ·æœ‰äº¤äº’ä¸ºæ´»è·ƒ\nç”¨æˆ·ä¸€æ®µæ—¶é—´ä¸äº¤äº’ï¼Œå³ä¸ºæµå¤±\nlifetims å·¥å…·åŒ…å¼•å…¥ å®‰è£… python çš„å·¥å…·åŒ…ï¼š\npip install lifetimes CLV æ•°æ®æŒ–æ˜ ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸåˆ¤å®šï¼Œéœ€è¦ä¸‰ä¸ªæŒ‡æ ‡\nfrequency ç”¨æˆ·ç™»å½•çš„é¢‘ç‡ï¼Œè¿™é‡Œä¸ºå‘¨æœŸå†…çš„å¤©æ•° recency ç”¨æˆ·çš„æœ€å¤§å‘¨æœŸï¼Œå³ç¬¬ä¸€æ¬¡æ´»è·ƒåˆ°æœ€åä¸€æ¬¡æ´»è·ƒ T ç”¨æˆ·æ‰€å¤„é˜¶æ®µï¼Œç¬¬ä¸€æ¬¡æ´»è·ƒåˆ°è§‚å¯Ÿå‘¨æœŸç»“æŸ å¯¹äºä»˜è´¹é¢„æµ‹ï¼Œè¿˜éœ€è¦ç”¨æˆ·çš„å¹³å‡ä»˜è´¹é‡‘é¢ã€‚\næ•°æ®è·å– ä»æ•°æ®åº“è·å– SELECT customer_id, COUNT(distinct date(transaction_at)) - 1 as frequency, datediff(\u0026#39;day\u0026#39;, MIN(transaction_at), MAX(transaction_at)) as recency, AVG(total_price) as monetary_value, datediff(\u0026#39;day\u0026#39;, CURRENT_DATE, MIN(transaction_at)) as T FROM orders GROUP BY customer_id python å¤„ç† from lifetimes.",
    "inLanguage" : "zh-CN",
    "author" : "è°·ç²’",
    "creator" : "è°·ç²’",
    "publisher": "è°·ç²’",
    "accountablePerson" : "è°·ç²’",
    "copyrightHolder" : "è°·ç²’",
    "copyrightYear" : "2019",
    "datePublished": "2019-12-25 23:28:09 \u002b0800 CST",
    "dateModified" : "2019-12-25 23:28:09 \u002b0800 CST",
    "url" : "https:\/\/kuhungio.me\/2019\/lifetimes\/",
    "wordCount" : "468",
    "keywords" : [ "ç”¨æˆ·","ç”Ÿå‘½å‘¨æœŸ","ä»·å€¼è¯„ä¼°", "è°·ç²’çš„åšå®¢"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://kuhungio.me">è°·ç²’çš„åšå®¢</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">å†å²æ–‡ç« </a>
                
                <a class="menu-item" href="/tags/mindmap/" title="">æ€ç»´å¯¼å›¾</a>
                
                <a class="menu-item" href="/about/" title="å…³äºæˆ‘">å…³äºæˆ‘</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://kuhungio.me">è°·ç²’çš„åšå®¢</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">å†å²æ–‡ç« </a>
                
                <a class="menu-item" href="/tags/mindmap/" title="">æ€ç»´å¯¼å›¾</a>
                
                <a class="menu-item" href="/about/" title="å…³äºæˆ‘">å…³äºæˆ‘</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">å¦‚ä½•è®¡ç®—ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼ˆCLVï¼‰</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://kuhungio.me" rel="author">è°·ç²’</a> with â™¥
                <span class="post-time">
                on <time datetime=2019-12-25 itemprop="datePublished">December 25, 2019</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://kuhungio.me/categories/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"> æ•°æ®æŒ–æ˜/æœºå™¨å­¦ä¹  </a>
                        
                </span>

                |
                <a href="#gitalk-container" itemprop="discussionUrl">
                    <span class="gitalk-comment-count" itemprop="commentCount"></span>
                </a>
                æ¡è¯„è®º
        </div>
    </header>

        <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title"></h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#ç”¨æˆ·ç²¾ç»†åŒ–è¿è¥ä»·å€¼å·¨å¤§">ç”¨æˆ·ç²¾ç»†åŒ–è¿è¥ä»·å€¼å·¨å¤§</a></li>
    <li><a href="#ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼clv">ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼ˆCLVï¼‰</a></li>
    <li><a href="#clv-æ˜¯ä»€ä¹ˆ">CLV æ˜¯ä»€ä¹ˆ</a></li>
    <li><a href="#clv-å›ç­”å“ªäº›é—®é¢˜">CLV å›ç­”å“ªäº›é—®é¢˜</a></li>
    <li><a href="#å¦‚ä½•åœ¨è‡ªå®¶äº§å“ä¸­å¼•å…¥-clv">å¦‚ä½•åœ¨è‡ªå®¶äº§å“ä¸­å¼•å…¥ CLV</a>
      <ul>
        <li><a href="#åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</a></li>
        <li><a href="#æ´»è·ƒä¸æµå¤±çš„å®šä¹‰">æ´»è·ƒä¸æµå¤±çš„å®šä¹‰</a></li>
        <li><a href="#lifetims-å·¥å…·åŒ…å¼•å…¥">lifetims å·¥å…·åŒ…å¼•å…¥</a></li>
      </ul>
    </li>
    <li><a href="#clv-æ•°æ®æŒ–æ˜">CLV æ•°æ®æŒ–æ˜</a>
      <ul>
        <li><a href="#æ•°æ®è·å–">æ•°æ®è·å–</a></li>
        <li><a href="#bgnbd-æ¨¡å‹">BG/NBD æ¨¡å‹</a></li>
        <li><a href="#é¢„æµ‹å•ä¸ªç”¨æˆ·çš„è´­ä¹°è¡Œä¸º">é¢„æµ‹å•ä¸ªç”¨æˆ·çš„è´­ä¹°è¡Œä¸º</a></li>
        <li><a href="#ç”Ÿå‘½å‘¨æœŸä»·å€¼é¢„æµ‹">ç”Ÿå‘½å‘¨æœŸä»·å€¼é¢„æµ‹</a></li>
      </ul>
    </li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
  </ul>
</nav>
  </div>
</div>

<script type="text/javascript">
  window.onload = function () {
    var fix = $('.post-toc');
    var end = $('.post-comment');
    var fixTop = fix.offset().top, fixHeight = fix.height();
    var endTop, miss;
    var offsetTop = fix[0].offsetTop;

    $(window).scroll(function () {
      var docTop = Math.max(document.body.scrollTop, document.documentElement.scrollTop);

      if (end.length > 0) {
        endTop = end.offset().top;
        miss = endTop - docTop - fixHeight;
      }

      if (fixTop < docTop) {
        fix.css({ 'position': 'fixed' });
        if ((end.length > 0) && (endTop < (docTop + fixHeight))) {
          fix.css({ top: miss });
        } else {
          fix.css({ top: 0 });
        }
      } else {
        fix.css({ 'position': 'absolute' });
        fix.css({ top: offsetTop });
      }
    })
  }
</script>

    <div class="post-content">
        

        
            
        

        
        

          
          
          

          
          
          

          <p>åœ¨ç”¨æˆ·å…³ç³»ç®¡ç†ä¸­ï¼Œå¸¸ä¼šé‡åˆ°äº›ç›´å‡»çµé­‚çš„é—®é¢˜ï¼š</p>
<ul>
<li>
<p>è¿™æ‰¹ç”¨æˆ·åˆ°åº•ä»·å€¼å‡ ä½•ï¼Ÿ</p>
</li>
<li>
<p>ä¸ºä»€ä¹ˆè¦ç”¨è¿™ç§æªæ–½å»å¹²é¢„ç”¨æˆ·ï¼Œè€Œä¸æ˜¯å¦ä¸€ç§æ–¹å¼ã€‚</p>
</li>
<li>
<p>ä¸ºä»€ä¹ˆå¹²é¢„è¿™ç±»ç”¨æˆ·ï¼Œè€Œä¸å»å¹²é¢„å¦ä¸€ç±»ï¼Œä»–ä»¬çš„åˆ’åˆ†æ ‡å‡†æ˜¯ä»€ä¹ˆã€‚</p>
</li>
</ul>
<p>æœ‰è¿™äº›é—®é¢˜ï¼Œå®è´¨æ˜¯å› ä¸ºå¯¹å®¢æˆ·ä»·å€¼ä¸å¤Ÿäº†è§£ï¼Œç¼ºä¹è¡Œä¹‹æœ‰æ•ˆçš„åˆ’åˆ†æ–¹å¼ã€‚</p>
<h2 id="ç”¨æˆ·ç²¾ç»†åŒ–è¿è¥ä»·å€¼å·¨å¤§">ç”¨æˆ·ç²¾ç»†åŒ–è¿è¥ä»·å€¼å·¨å¤§</h2>
<p>éšç€äººå£çº¢åˆ©çš„æ¶ˆå¤±ï¼Œå¢é•¿é€æ¸è§é¡¶ï¼Œæ€¥éœ€åœ¨ç°æœ‰ç”¨æˆ·æ± åšå­¦é—®ã€‚è¿‡å»ç²—æ”¾å¼çš„ä¹°é‡ç­–ç•¥å·²ç»ä¸å†ç”Ÿæ•ˆï¼Œä¸€æ˜¯ä¹°é‡æˆæœ¬é€æ¸é«˜ä¼ï¼ŒäºŒæ˜¯ä¹°é‡å¸¦æ¥çš„ç”¨æˆ·å¿ è¯šåº¦æä½ã€‚å¯¹ç°æœ‰å®¢æˆ·ç¾¤ä½“çš„åˆ’åˆ†å’Œäº’ç›¸å€’æµï¼Œæˆä¸ºé‡ä¸­ä¹‹é‡ã€‚è¡Œä¸šä¸­çš„é»‘è¯â€œæ´—ç”¨æˆ·â€ï¼Œå³æ˜¯è®²çš„è¿™ä¸€ç­–ç•¥ã€‚</p>
<p>å¯¹äºå¦‚ä½•åˆ’åˆ†ç”¨æˆ·ï¼Œä¸ç”¨çš„èŒèƒ½ä¼šæœ‰ä¸åŒçš„çœ‹æ³•ã€‚äº§å“æœ‰äº§å“çš„çœ‹æ³•ï¼Œå¯èƒ½åŸºäºæŸé¡¹åŠŸèƒ½åå¥½ï¼›è¿è¥æœ‰è¿è¥çš„çœ‹æ³•ï¼Œæ˜¯å„ç§æ´»åŠ¨ç©æ³•çš„å®šä¹‰ï¼›ç”šè‡³é¢†å¯¼è¿˜æœ‰ä»–çš„ä¸€å¥—çœ‹æ³•ã€‚ä½†æ˜¯ï¼Œæ— è®ºæ€ä¹ˆåˆ‡å…¥ï¼Œå•†ä¸šçš„æ ¸å¿ƒæ‹¿æä½ï¼Œæ‰ä¼šå…«ä¹ä¸ç¦»åã€‚</p>
<p>ä»€ä¹ˆæ˜¯å•†ä¸šçš„æœ¬è´¨ï¼šå•†ä¸šçš„æœ¬è´¨æ˜¯è·åˆ©ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä»ç”¨æˆ·çš„è´§å¸ä»·å€¼åˆ‡å…¥ï¼Œè¯„ä¼°å’Œåˆ’åˆ†ç”¨æˆ·çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼Œè¿™å¹¶ä¸æ˜¯å­¦ç•Œçš„æ–°é²œäº§ç‰©ï¼Œè¯¥ç†è®ºåœ¨ä¸Šä¸–çºª80å¹´ä»£å°±å·²ç»æå‡ºã€‚ä½†å¯¹äºäº’è”ç½‘ï¼Œç½‘ä¸Šå¯æœå¯»åˆ°çš„èµ„æ–™å°‘ä¹‹åˆå°‘ã€‚å¯èƒ½çš„åŸå› æœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯äº’è”ç½‘åœ¨è¿‡å»20å¹´å¿«é€Ÿçˆ†å‘ï¼Œé£å£ä¸Šèººç€ä¹Ÿèƒ½èµšé’±ï¼›äºŒæ˜¯å„å®¶çš„ç­–ç•¥å†…éƒ¨ä¸ç»Ÿä¸€ï¼Œæ— æ³•å½¢æˆç»Ÿä¸€çš„å£å¾„ã€‚</p>
<p>ä½†è¿™äº›éƒ½ä¸æ˜¯ä¸å»åº”ç”¨ä»–çš„ç†ç”±ï¼Œåè€Œè¯´æ˜å…¶ä¸­ä»·å€¼å·¨å¤§ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å‰¥ç¦»å¼€å¤æ‚çš„å•†ä¸šé€»è¾‘ï¼Œä»…ä»äº¤æ˜“å…¥æ‰‹ï¼Œåˆ†æç”¨æˆ·çš„ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼Œä»¥åŠç”¨æˆ·æ‰€å¤„çš„çŠ¶æ€ã€‚</p>
<h2 id="ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼clv">ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼ˆCLVï¼‰</h2>
<p>éšç€ç²¾ç»†åŒ–è¿è¥çš„é“ºå¼€ï¼Œè¿‡å»ç²—æ”¾å¼çš„ã€ä¹°é‡ç”¨æˆ·å·²ç»ä¸å†ä¹°è´¦ã€‚æ¯ä¸ªç”¨æˆ·æ‰€èƒ½æ¥å—çš„æœ€ä½æœåŠ¡å„ä¸ç›¸åŒã€‚å¦‚ä½•æ ¹æ®ç”¨æˆ·ä»·å€¼ï¼Œè¿›è¡Œèµ„æºçš„æœ‰æ•ˆåˆ©ç”¨ã€‚æœ€å¤§åŒ–æ æ†çš„ä½¿ç”¨ï¼Œæˆä¸ºä¼ä¸šç”Ÿæ­»çš„å…³é”®ã€‚</p>
<p>è¿‡å»ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„ç†è®ºå‡ºç°åœ¨äº’è”ç½‘åº”ç”¨æˆ–æ˜¯æ¸¸æˆä¸­ã€‚ä½†æ˜¯ï¼Œè¿ç”¨è·¨å­¦ç§‘çš„æ€ç»´ï¼Œå°±å¯ä»¥å‘ç°ï¼šå¸‚åœºè¥é”€é¢†åŸŸå·²è¿›è¡Œè¿‡ç ”ç©¶ï¼Œå¹¶ç»™å‡ºäº†ç²¾åº¦æé«˜ã€å¯è§£é‡Šæ€§å¼ºçš„æ¨¡å‹æ–¹æ³•ã€‚</p>
<p>è¿™ç§æ–¹æ³•ï¼Œå°±å«åšç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼Œè‹±æ–‡åç§° Customer Life Time Valueï¼Œç®€ç§° CLV æˆ–è€… LTVã€‚</p>
<h2 id="clv-æ˜¯ä»€ä¹ˆ">CLV æ˜¯ä»€ä¹ˆ</h2>
<p>ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸï¼Œæ˜¯ä¸€ç§åˆ»ç”»ç”¨æˆ·çš„æ–¹æ³•ã€‚ä¸€èˆ¬ç”¨æ¥è§£å†³ä¸¤ç±»é—®é¢˜ï¼š</p>
<ol>
<li>ç”¨æˆ·è¿˜æœ‰å¤šå°‘ä»·å€¼ã€ç”¨ä»¥è¡¡é‡æŠ•å…¥äº§å‡ºæ¯”</li>
<li>åœ¨å¹²é¢„ç”¨æˆ·åï¼Œæ ¹æ®ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼çš„å˜åŒ–ï¼Œä¼˜åŒ–èµ„æºçš„æŠ•æ”¾ã€‚</li>
</ol>
<p>å³ç”¨æˆ·ç®¡ç†çš„ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šç”¨æˆ·æ‰€å…·å¤‡çš„ä»·å€¼ä»¥åŠç­–ç•¥çš„æœ‰æ•ˆæ€§ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCLV çš„äº§å“å½¢æ€è¦æ±‚éåˆçº¦ã€‚åˆçº¦åœ¨å›½å†…æœ€æœ‰ä»£è¡¨çš„æ˜¯åˆçº¦æ‰‹æœºã€‚ä¸€èˆ¬äº’è”ç½‘äº§å“ï¼Œåˆçº¦å½¢æ€è¾ƒä¸ºå°‘è§ã€‚</p>
<p>CLV çš„ç”¨æˆ·ç¾¤ä½“éœ€å·²ç»äº§ç”Ÿäº¤æ˜“ï¼Œæœªä»˜è´¹ç”¨æˆ·ä¸çº³å…¥è€ƒé‡ã€‚å½“ç„¶ï¼Œæ¦‚å¿µè¿ç§»ï¼Œå°†ä»˜è´¹æ¢æˆæ´»è·ƒæˆ–å†…å®¹æ¶ˆè´¹ï¼Œè¯¥æ¨¡å‹ä¹Ÿèƒ½å¤„ç†ã€‚</p>
<h2 id="clv-å›ç­”å“ªäº›é—®é¢˜">CLV å›ç­”å“ªäº›é—®é¢˜</h2>
<p>ç”¨æˆ·æ´»è·ƒè¿˜æ˜¯æµå¤±ï¼Œç”¨æˆ·è¿˜æœ‰å¤šå°‘ä»˜è´¹æ½œåŠ›ï¼Œç”¨æˆ·åœ¨æœªæ¥æŸæ®µæ—¶é—´ä¼šå¦å†æ¬¡è´­ä¹°ã€‚è¿™ä¸‰ä¸ªé—®é¢˜ï¼Œæ˜¯ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼èƒ½å¤Ÿå›ç­”çš„ã€‚</p>
<h2 id="å¦‚ä½•åœ¨è‡ªå®¶äº§å“ä¸­å¼•å…¥-clv">å¦‚ä½•åœ¨è‡ªå®¶äº§å“ä¸­å¼•å…¥ CLV</h2>
<h3 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h3>
<ul>
<li>åˆ¤æ–­ç”¨æˆ·æ‰€å¤„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ</li>
<li>é¢„æµ‹ç”¨æˆ·æŒ‡å®šå‘¨æœŸå†…è´­ä¹°æ¦‚ç‡</li>
<li>é¢„æµ‹ç”¨æˆ·çš„ç”Ÿå‘½å‘¨æœŸä»·å€¼</li>
<li>é€šè¿‡å†å²ä»˜è´¹æ•°æ®ï¼Œé¢„æµ‹æœªæ¥ä»˜è´¹</li>
</ul>
<h3 id="æ´»è·ƒä¸æµå¤±çš„å®šä¹‰">æ´»è·ƒä¸æµå¤±çš„å®šä¹‰</h3>
<p>å®šä¹‰ï¼š</p>
<p>ç”¨æˆ·æœ‰äº¤äº’ä¸ºæ´»è·ƒ</p>
<p>ç”¨æˆ·ä¸€æ®µæ—¶é—´ä¸äº¤äº’ï¼Œå³ä¸ºæµå¤±</p>
<h3 id="lifetims-å·¥å…·åŒ…å¼•å…¥">lifetims å·¥å…·åŒ…å¼•å…¥</h3>
<p>å®‰è£… python çš„å·¥å…·åŒ…ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pip install lifetimes
</span></span></code></pre></div><h2 id="clv-æ•°æ®æŒ–æ˜">CLV æ•°æ®æŒ–æ˜</h2>
<p>ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸåˆ¤å®šï¼Œéœ€è¦ä¸‰ä¸ªæŒ‡æ ‡</p>
<ol>
<li>frequency ç”¨æˆ·ç™»å½•çš„é¢‘ç‡ï¼Œè¿™é‡Œä¸ºå‘¨æœŸå†…çš„å¤©æ•°</li>
<li>recency ç”¨æˆ·çš„æœ€å¤§å‘¨æœŸï¼Œå³ç¬¬ä¸€æ¬¡æ´»è·ƒåˆ°æœ€åä¸€æ¬¡æ´»è·ƒ</li>
<li>T ç”¨æˆ·æ‰€å¤„é˜¶æ®µï¼Œç¬¬ä¸€æ¬¡æ´»è·ƒåˆ°è§‚å¯Ÿå‘¨æœŸç»“æŸ</li>
</ol>
<p>å¯¹äºä»˜è´¹é¢„æµ‹ï¼Œè¿˜éœ€è¦ç”¨æˆ·çš„å¹³å‡ä»˜è´¹é‡‘é¢ã€‚</p>
<h3 id="æ•°æ®è·å–">æ•°æ®è·å–</h3>
<h4 id="ä»æ•°æ®åº“è·å–">ä»æ•°æ®åº“è·å–</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>      customer_id,
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">COUNT</span>(<span style="color:#66d9ef">distinct</span> date(transaction_at)) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">as</span> frequency,
</span></span><span style="display:flex;"><span>      datediff(<span style="color:#e6db74">&#39;day&#39;</span>, <span style="color:#66d9ef">MIN</span>(transaction_at), <span style="color:#66d9ef">MAX</span>(transaction_at)) <span style="color:#66d9ef">as</span> recency,
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">AVG</span>(total_price) <span style="color:#66d9ef">as</span> monetary_value,
</span></span><span style="display:flex;"><span>      datediff(<span style="color:#e6db74">&#39;day&#39;</span>, <span style="color:#66d9ef">CURRENT_DATE</span>, <span style="color:#66d9ef">MIN</span>(transaction_at)) <span style="color:#66d9ef">as</span> T
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FROM</span> orders
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> customer_id
</span></span></code></pre></div><h4 id="python-å¤„ç†">python å¤„ç†</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>    <span style="color:#f92672">from</span> lifetimes.datasets <span style="color:#f92672">import</span> load_transaction_data
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">from</span> lifetimes.utils <span style="color:#f92672">import</span> summary_data_from_transaction_data
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    transaction_data <span style="color:#f92672">=</span> load_transaction_data()
</span></span><span style="display:flex;"><span>    print(transaction_data<span style="color:#f92672">.</span>head())
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      date  id
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    0  2014-03-08 00:00:00   0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    1  2014-05-21 00:00:00   1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    2  2014-03-14 00:00:00   2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    3  2014-04-09 00:00:00   2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    4  2014-05-21 00:00:00   2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    summary <span style="color:#f92672">=</span> summary_data_from_transaction_data(transaction_data, <span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;date&#39;</span>, observation_period_end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;2014-12-31&#39;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    print(summary<span style="color:#f92672">.</span>head())
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    frequency  recency      T
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    id
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    0         0.0      0.0  298.0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    1         0.0      0.0  224.0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    2         6.0    142.0  292.0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    3         0.0      0.0  147.0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    4         2.0      9.0  183.0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    bgf<span style="color:#f92672">.</span>fit(summary[<span style="color:#e6db74">&#39;frequency&#39;</span>], summary[<span style="color:#e6db74">&#39;recency&#39;</span>], summary[<span style="color:#e6db74">&#39;T&#39;</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># &lt;lifetimes.BetaGeoFitter: fitted with 5000 subjects, a: 1.85, alpha: 1.86, b: 3.18, r: 0.16&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> lifetimes.datasets <span style="color:#f92672">import</span> load_cdnow_summary
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> load_cdnow_summary(index_col<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(data<span style="color:#f92672">.</span>head())
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     frequency   recency      T
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ID
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">1    2           30.43       38.86
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">2    1            1.71       38.86
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">3    0            0.00       38.86
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">4    0            0.00       38.86
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">5    0            0.00       38.86
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span></code></pre></div><h3 id="bgnbd-æ¨¡å‹">BG/NBD æ¨¡å‹</h3>
<p>BG/NBD æ˜¯ä¸€ä¸ªç»å…¸æ¨¡å‹æ”¹è¿›å‹ï¼Œè¯¦ç»†çš„æ•°å­¦è®ºè¯å‚è§ï¼š<a href="http://brucehardie.com/notes/009/pareto_nbd_derivations_2005-11-05.pdf">A Note on Deriving the Pareto/NBD Model
and Related Expressions</a></p>
<p>è¯¥æ¨¡å‹æœ‰å¦‚ä¸‹å‡è®¾ï¼š</p>
<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="/images/lifetimes/assumptions.jpg" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<p>é€šè¿‡æ¨¡å‹æ‹Ÿåˆï¼Œå¾—åˆ°4ä¸ªå‚æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> lifetimes <span style="color:#f92672">import</span> BetaGeoFitter
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># similar API to scikit-learn and lifelines.</span>
</span></span><span style="display:flex;"><span>bgf <span style="color:#f92672">=</span> BetaGeoFitter(penalizer_coef<span style="color:#f92672">=</span><span style="color:#ae81ff">0.0</span>)
</span></span><span style="display:flex;"><span>bgf<span style="color:#f92672">.</span>fit(data[<span style="color:#e6db74">&#39;frequency&#39;</span>], data[<span style="color:#e6db74">&#39;recency&#39;</span>], data[<span style="color:#e6db74">&#39;T&#39;</span>])
</span></span><span style="display:flex;"><span>print(bgf)
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;lifetimes.BetaGeoFitter: fitted with 2357 subjects, a: 0.79, alpha: 4.41, b: 2.43, r: 0.24&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>bgf<span style="color:#f92672">.</span>summary
</span></span></code></pre></div><p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="/images/lifetimes/bgm.jpg" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<h4 id="æ•ˆæœå¯è§†åŒ–">æ•ˆæœå¯è§†åŒ–</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> lifetimes.plotting <span style="color:#f92672">import</span> plot_probability_alive_matrix
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plot_probability_alive_matrix(bgf)
</span></span></code></pre></div><p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="/images/lifetimes/frequency_recency.jpg" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>
<p>å³ä¸‹è§’ä¸ºæœ€ä½³å®¢æˆ·ï¼Œäº¤æ˜“é¢‘ç‡é«˜ã€‚äº¤æ˜“è·¨åº¦å¤§ï¼›å³ä¸Šçš„å®¢æˆ·çŸ­æ—¶å¤šæ¬¡äº¤æ˜“ï¼Œæå¯èƒ½å·²æµå¤±ã€‚</p>
<h3 id="é¢„æµ‹å•ä¸ªç”¨æˆ·çš„è´­ä¹°è¡Œä¸º">é¢„æµ‹å•ä¸ªç”¨æˆ·çš„è´­ä¹°è¡Œä¸º</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>t <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span> <span style="color:#75715e">#predict purchases in 10 periods</span>
</span></span><span style="display:flex;"><span>individual <span style="color:#f92672">=</span> summary<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">20</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The below function is an alias to `bfg.conditional_expected_number_of_purchases_up_to_time`</span>
</span></span><span style="display:flex;"><span>bgf<span style="color:#f92672">.</span>predict(t, individual[<span style="color:#e6db74">&#39;frequency&#39;</span>], individual[<span style="color:#e6db74">&#39;recency&#39;</span>], individual[<span style="color:#e6db74">&#39;T&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0.0576511</span>
</span></span></code></pre></div><h3 id="ç”Ÿå‘½å‘¨æœŸä»·å€¼é¢„æµ‹">ç”Ÿå‘½å‘¨æœŸä»·å€¼é¢„æµ‹</h3>
<p>åœ¨é¢„æµ‹ä»·å€¼æ—¶ï¼Œéœ€è¦ç¬¬å››ä¸ªå‚æ•°ï¼šç”¨æˆ·äº¤æ˜“çš„æ¬¡å‡é‡‘é¢ã€‚</p>
<p>è¯¥æ¨¡å‹æœ‰ä¸ªé‡è¦å‰æï¼šè´­ä¹°é¢‘æ¬¡å’Œè´­ä¹°é‡‘é¢æ— ç›¸å…³æ€§ã€‚å…·ä½“å¯å‚è€ƒ <a href="http://www.brucehardie.com/notes/025/gamma_gamma.pdf">The Gamma-Gamma Model of Monetary
Value</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> lifetimes.datasets <span style="color:#f92672">import</span> load_cdnow_summary_data_with_monetary_value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>summary_with_money_value <span style="color:#f92672">=</span> load_cdnow_summary_data_with_monetary_value()
</span></span><span style="display:flex;"><span>summary_with_money_value<span style="color:#f92672">.</span>head()
</span></span><span style="display:flex;"><span>returning_customers_summary <span style="color:#f92672">=</span> summary_with_money_value[summary_with_money_value[<span style="color:#e6db74">&#39;frequency&#39;</span>]<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(returning_customers_summary<span style="color:#f92672">.</span>head())
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">             frequency  recency      T  monetary_value
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">customer_id
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">1                    2    30.43  38.86           22.35
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">2                    1     1.71  38.86           11.77
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">6                    7    29.43  38.86           73.74
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">7                    1     5.00  38.86           11.77
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">9                    2    35.71  38.86           25.55
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span></code></pre></div><h4 id="ç›¸å…³æ€§æ£€éªŒ"><strong>ç›¸å…³æ€§æ£€éªŒ</strong></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>returning_customers_summary[[<span style="color:#e6db74">&#39;monetary_value&#39;</span>, <span style="color:#e6db74">&#39;frequency&#39;</span>]]<span style="color:#f92672">.</span>corr()
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                monetary_value  frequency
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">monetary_value        1.000000   0.113884
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">frequency             0.113884   1.000000
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> lifetimes <span style="color:#f92672">import</span> GammaGammaFitter
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ggf <span style="color:#f92672">=</span> GammaGammaFitter(penalizer_coef <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>ggf<span style="color:#f92672">.</span>fit(returning_customers_summary[<span style="color:#e6db74">&#39;frequency&#39;</span>],
</span></span><span style="display:flex;"><span>        returning_customers_summary[<span style="color:#e6db74">&#39;monetary_value&#39;</span>])
</span></span><span style="display:flex;"><span>print(ggf)
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;lifetimes.GammaGammaFitter: fitted with 946 subjects, p: 6.25, q: 3.74, v: 15.45&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span></code></pre></div><h4 id="æ¬¡å‡ä¼°è®¡">æ¬¡å‡ä¼°è®¡</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>print(ggf<span style="color:#f92672">.</span>conditional_expected_average_profit(
</span></span><span style="display:flex;"><span>        summary_with_money_value[<span style="color:#e6db74">&#39;frequency&#39;</span>],
</span></span><span style="display:flex;"><span>        summary_with_money_value[<span style="color:#e6db74">&#39;monetary_value&#39;</span>]
</span></span><span style="display:flex;"><span>    )<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">3</span>))
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">customer_id
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">1     24.658619
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">2     18.911489
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">3     35.170981
</span></span></span></code></pre></div><h4 id="æ€»ä»·å€¼ä¼°è®¡">æ€»ä»·å€¼ä¼°è®¡</h4>
<p>æœ€åï¼Œä½¿ç”¨ DCF ç°é‡‘æµæŠ˜ç°ï¼Œå¾—åˆ°ç”¨æˆ·æ€»ä½“ä»·å€¼çš„å½“ä¸‹ä¼°å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># refit the BG model to the summary_with_money_value dataset</span>
</span></span><span style="display:flex;"><span>bgf<span style="color:#f92672">.</span>fit(summary_with_money_value[<span style="color:#e6db74">&#39;frequency&#39;</span>], summary_with_money_value[<span style="color:#e6db74">&#39;recency&#39;</span>], summary_with_money_value[<span style="color:#e6db74">&#39;T&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(ggf<span style="color:#f92672">.</span>customer_lifetime_value(
</span></span><span style="display:flex;"><span>    bgf, <span style="color:#75715e">#the model to use to predict the number of future transactions</span>
</span></span><span style="display:flex;"><span>    summary_with_money_value[<span style="color:#e6db74">&#39;frequency&#39;</span>],
</span></span><span style="display:flex;"><span>    summary_with_money_value[<span style="color:#e6db74">&#39;recency&#39;</span>],
</span></span><span style="display:flex;"><span>    summary_with_money_value[<span style="color:#e6db74">&#39;T&#39;</span>],
</span></span><span style="display:flex;"><span>    summary_with_money_value[<span style="color:#e6db74">&#39;monetary_value&#39;</span>],
</span></span><span style="display:flex;"><span>    time<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>, <span style="color:#75715e"># months</span>
</span></span><span style="display:flex;"><span>    discount_rate<span style="color:#f92672">=</span><span style="color:#ae81ff">0.01</span> <span style="color:#75715e"># monthly discount rate ~ 12.7% annually</span>
</span></span><span style="display:flex;"><span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">3</span>))
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">customer_id
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">1      140.096211
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">2       18.943467
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">3       38.180574
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Name: clv, dtype: float64
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span></code></pre></div><h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼æ¨¡å‹ï¼Œä¸åŒäºå…¶å®ƒæ¨¡å‹ã€‚è¯¥æ¨¡å‹å¯¹æ¯ä¸ªç”¨æˆ·å•ç‹¬å»ºæ¨¡ï¼Œè€Œä¸æ˜¯ç¡¬æ€§çš„æŒ‰æµå¤±å¤©æ•°åˆ’åˆ†ï¼Œæœ‰æå¼ºçš„çµæ´»æ€§ã€‚åœ¨å¾—åˆ°ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸé˜¶æ®µã€ä»¥åŠç”¨æˆ·çš„ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å…·ä½“åº”ç”¨äº†ã€‚</p>
<p>è½åœ°åœºæ™¯å¤šç§å¤šæ ·ï¼Œä½†è¦æ¨åŠ¨ä¸Šä¸‹æ¸¸ï¼Œä»éœ€è¦è¶³å¤Ÿä¿¡æœçš„ç†ç”±ã€‚è¿™é‡Œç»™åˆ°çš„å»ºè®®æ˜¯ï¼Œå»æ¨¡æ‹Ÿå†å²çš„æ•°æ®è¡¨ç°ï¼Œç”¨æ•°æ®è¯´æ˜æ•ˆæœã€‚</p>
<p>å–œæ¬¢æœ¬æ–‡çš„æœ‹å‹ï¼Œåˆ«å¿˜äº†ç‚¹èµ ğŸ‘ã€å–œæ¬¢ â¤ +å…³æ³¨ ğŸ””å“¦ï¼Œæ‚¨çš„å°å°ä¸¾åŠ¨ï¼Œæ˜¯å¯¹ä½œè€…æœ€å¤§çš„æ”¯æŒ~ğŸ’ª</p>
<p><a href="/about/">å…³äºä½œè€…</a></p>

    </div>

    <div class="post-copyright">
            
            <p class="copyright-item">
                <span>Author:</span>
                <span>è°·ç²’ </span>
                </p>
            

            
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://kuhungio.me/2019/lifetimes/>
                        <script>
                            document.write(decodeURI(location.origin + location.pathname))
                        </script>
                    </a>
            </p>
            
            
            <p class="copyright-item lincese">
                æœ¬æ–‡é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯
            </p>
            
    </div>


    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s):
            
            <span class="tag"><a href="https://kuhungio.me/tags/%E7%94%A8%E6%88%B7/">
                    #ç”¨æˆ·</a></span>
            
            <span class="tag"><a href="https://kuhungio.me/tags/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/">
                    #ç”Ÿå‘½å‘¨æœŸ</a></span>
            
            <span class="tag"><a href="https://kuhungio.me/tags/%E4%BB%B7%E5%80%BC%E8%AF%84%E4%BC%B0/">
                    #ä»·å€¼è¯„ä¼°</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> Â·
                <span><a href="https://kuhungio.me">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://kuhungio.me/2019/machine_learning_system_design/" class="prev" rel="prev" title="æœºå™¨å­¦ä¹ ç³»ç»Ÿè®¾è®¡ Machine learning system design"><i class="iconfont icon-left"></i>&nbsp;æœºå™¨å­¦ä¹ ç³»ç»Ÿè®¾è®¡ Machine learning system design</a>
        
        
        <a href="https://kuhungio.me/2020/audio_progress/" class="next" rel="next" title="äººå£°æå–ä¸¤å¤§æ­¥éª¤ï¼šåˆ†ç¦»éŸ³é¢‘èƒŒæ™¯å£°&#43;è¿‡æ»¤ç©ºç™½">äººå£°æå–ä¸¤å¤§æ­¥éª¤ï¼šåˆ†ç¦»éŸ³é¢‘èƒŒæ™¯å£°&#43;è¿‡æ»¤ç©ºç™½&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>
</article>
          
<div class="post-comment"><div onclick="showDisqus();" id="disqus_title" class="disqus_title">æ˜¾ç¤º Disqus è¯„è®º</div><div id="gitalk-container" class="gitalk-container"></div>
    <link rel="stylesheet" href="/lib/gitalk/gitalk-1.2.2.min.css">
    <script src="/lib/gitalk/gitalk-1.2.2.min.js"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: '7618c58215895baa24b30356cbb1cd23',
        title: 'å¦‚ä½•è®¡ç®—ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼ˆCLVï¼‰',
        clientID: '7e5b8bd7063e5315e349',
        clientSecret: 'd6bd237e0a078b7e343775a47533d7b95d364899',
        repo: 'kuhung.github.io',
        owner: 'kuhung',
        admin: ['kuhung'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the
      <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a>
    </noscript><div id="disqus_thread"></div>
    <script type="text/javascript">
    function showDisqus() {
      

      
      
      
      

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = false;
      var disqus_shortname = 'kuhungio';
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

      window.location.hash = "#disqus_thread";
    }
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>

          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2016 - 2023</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i>
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://kuhungio.me">è°·ç²’</a> | </span>
         

         
        <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span>
        
    </div>
    <script>
      const currentTheme = window.localStorage && window.localStorage.getItem('theme')
      const isDark = currentTheme === 'dark'
      if (isDark) {
        document.body.classList.add('dark-theme')
      }
    </script>
</footer>












    
     <link href="//cdn.bootcdn.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
